<head>
   <title>Kip</title>
   <link href='http://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>
</head>

<body>
   {{>navigation}}
   {{> main }}
</body>

 <!-- Barra de navegacion-->
<template name="navigation">
  <header>
          <div class="container">
            <h1><a href="{{pathFor 'welcome'}}">Kip</a></h1>
              <nav>
                <ul>
                  <li><a href="{{pathFor 'ideas'}}">Ideas</a></li>
                  <li><a  href="{{pathFor 'people'}}">Personas</a></li>
                  {{#if currentUser}}
                    <li>{{>theUser}}</li>
                    <li><a href="#logout" class="tryLogout" id="salir">Salir</a></li>
                  {{else}}
                    <li><a href="{{pathFor 'loginForm'}}" id="ingresar">Comenzar</a></li>
                  {{/if}}
                </ul>
              </nav>
          </div>
  </header>
</template>

<template name="main">

  {{#if currentUser}}
    {{>newIdea}}
  {{/if}}
  {{#if showSimilarIdeas}}
      {{>similar_ideas}}
  {{/if}}
</template>

  <!-- Seccion:"Welcome"-->
<template name="welcome">
  <div class="wpage">
  {{#if currentUser}}
    {{>ideas}}
  {{else}}
        {{>welcomeMessage}}
  {{/if}}
  </div>
</template>

<template name="welcomeMessage">
    <h1>Kip</h1>
    <p>Manteniendo las ideas en la realidad</p>
    <br>
    <p>Caracteristicas con imagenes y botones de link</p>
    <p>Porqué Kip con boton "tengo una idea"</p>
    <p>Prensa</p>
    
</template>

<template name="newIdea">
  <form method="post" action="index.html">
        <label>¿Cuál es tu idea?</label>
        <p><textarea type="text" id="pitch">{{ideaData.pitch}}</textarea></p>
        <label>Palabras clave de tu idea separadas por coma</label>
        <p><input type="text" name="typeOfIdea" id="tagsOfIdea" value={{ideaData.tagsOfIdea}}></p>
        <p class="submit"><input type="submit"  class="searchIdea" value="Añadir Idea"></p>    
  </form>
</template>

<template name="similar_ideas">
  <section class="container">
  <div class="perfilIdeas">
  <h2>Ideas similares</h2>
  <p class="submit"><input type="submit"  class="saveIdea" value="Mi idea es diferente"></p>
  </div>
  </section>
  {{#each matching_idea}}
  <section class="container">
  <div class="perfilIdeas">
      {{>idea}}
  </div>
  </section>
  {{else}}
  <h3>No se encontraron ideas similares</h3>
  {{/each}}
</template>

<template name="ideas">
  {{#each open_idea}}
  <section class="container">
  <div class="perfilIdeas">
      {{>idea}}
      {{>comments}}
  </div>
  </section>
  {{/each}}
</template>

<template name="idea">
  <span>
    <a href="{{pathFor 'ideaData'}}">
      <p id="descriptionIdea">{{points}} {{pitch}}</p>
      <p id="descriptionIdea">{{tagsOfIdea}}</p>
    </a>
      <p id="descriptionIdea">{{>persons}}</p>
    <p class="submit"><input type="button"  class="followIdea" value="Kip"></p>
    {{#if canEdit this.peopleInvolved.users currentUser._id}}
        <a href="{{pathFor 'editIdea'}}"><input type="submit"  class="eIdea" value="Editar"></a>
      {{/if}}
  </span>
</template>

<template name="comments">
  {{#each commentToShow this}}
      <p><img src="/up.png" height="42" width="42" class="increase">{{points}} {{text}}</p>
  {{/each}}
  <p class="submit"><input type="button"  class="showComments" value="Ver todos"></p>
  {{>newComment}}
</template>

<template name="newComment">
<p><input type="text" name="textOfComment" id="textOfComment" placeholder="Nuevo comentario..."></p>
  <p class="submit"><input type="submit"  class="saveComment" value="Comentar"></p>
</template>

<template name="people">
  <section class="container">
  {{#each user}}
    <div class="perfilIdeas">
    <a href="{{pathFor 'profile'}}">
      {{profile.points}} {{profile.firstName}} {{profile.lastName}}
      {{#each profile.roles}}
        {{this}}
      {{/each}}
    </a>
    </div>
  {{/each}}
  </section>
</template>

<template name="editIdea">
  {{#each ideaData}}
  <h1>Edit</h1>
  <input type="text" id="description" name="description" value="{{pitch}}"><br>
  <!--Mostrar bloques actuales -->
  {{#each blocks}}
  <blockquote>Bloque</blockquote>
    {{>displayBlock}}
  {{/each}}
  {{#if newText}}
  <input type="button" id="isHeader" name="isHeader" value="Título">
  <input type="button" id="isSubheader" name="isSubheader" value="Título">
  <input type="button" id="isNormal" name="is Normal" value="Normal">
  <input type="button" id="italic" name="italic" value="Cursiva">
  <input type="button" id="blond" name="blond" value="Negrita">
  <input type="text" id="text" name="text" placeholder="Escribe aqui"><br>
  {{/if}}
  {{#if newImage}}
  <label for="image"> Insertar imagen <input type="file" id="image" name="image" class="image"> </label><br>
  {{/if}}
  <input type="button" id="newText" name="newText" class="newText" value="Añadir Texto">
  <input type="button" id="newImage" name="newImage" class="newImage" value="Añadir Imagen"><br>
  <a href="{{pathFor 'ideaData'}}">
   <input type="submit" id="done" name="done" class="done" value="Hecho">
  </a>
  <!--new Link también será interesante -->
  <!--posicion guardada en columnas de bootstrap o en tabla -->
  <!--input type="hidden" role="uploadcare-uploader" -->
  {{/each}}
</template>
<template name="displayBlock">
{{#if blockIsText this}}
  {{this}}
{{else}}
  {{#each fileFounded this}}
    <p>Archivo</p>
    {{name}}
    <img src="{{url}}">
  {{/each}}
{{/if}}
</template>
<!-- Seccion:"LogInForm"-->
<template name="loginForm">
  <section class="container">
          <div class="login">
                <h1>Inicia Sesión </h1>
                  <form method="post" action="index.html">
                    <a href=""><img src="loginfacebook.png"></a>
                    <a href="{{pathFor 'newUserForm'}}">Crear una cuenta</a>
                    <p><input type="text" id="username" name="username" placeholder="Usuario"></p>
                    <p><input type="password" id="password" name="password" value="" placeholder="Contraseña"></p>
                    <p class="remember_me">
                      <label>
                          <input type="checkbox" name="remember_me" id="remember_me">
                           Recordar en esta computadora
                        </label>
                    </p>
                    <p class="submit"><input type="submit" class="tryLogin" id="submitBoton" name="commit" value="Entrar"></p>
                    <div class="login-help">
              <p>¿Olvidaste tu contraseña? <a href="index.html">Haz clic aquí para resetearla</a>.</p>
          </div>
        </form>
          </div>
      </section>
</template>

<!-- Seccion:"newUserForm"-->
<template name="newUserForm">
  <section>
    <div class="userR">
      <h1>Nuevo usuario</h1>
      <form name="newUserForm">
        <p><input type="text" class="form-control" id="firstName" placeholder="Nombre"></p>
        <p><input type="text" class="form-control" id="lastName" placeholder="Apellido"></p>
        <p><input type="text" class="form-control" id="username" placeholder="Usuario"></p>
        <p><input type="text" class="form-control" id="email" placeholder="Correo Electrónico"></p>
        <p><input type="password" class="form-control" id="password" placeholder="Contraseña"></p>
        <p><label>¿Qué roles te gusta realizar en un proyecto?</label><br>
        <input type="checkbox" name="role" value="administración">Administrarlo<br>
        <input type="checkbox" name="role" value="desarrollo">Desarrollarlo (Parte técnica)<br>
        <input type="checkbox" name="role" value="diseño">Diseñarlo<br>
        <input type="checkbox" name="role" value="ventas">Venderlo<br>
        <input type="checkbox" name="role" value="marketing">Difundirlo/promocionarlo<br>
        <input type="checkbox" name="role" value="inversionista">Financearlo<br>
        </p>
        <input type="checkbox" name="role" value="mentoría">Mentoría<br>
        <p class="submit"><input id="submitBoton" class="createUser" type="submit" name="commit" value="Registrarse"></p>
        </form>
    </div>
  </section>
</template>

<template name="persons">
    {{#each peopleInvolved.users}}
      {{#each user this}}
        <a href="{{pathFor 'profile'}}">
        <p>{{profile.firstName}} {{profile.lastName}} </p>
        </a>
      {{/each}}
    {{/each}}
</template>

<template name="profile">
    {{#each user}}
    <section class="container">
      <div class="perfilUsuario">
        <h1>{{profile.firstName}} {{profile.lastName}} {{profile.points}}</h1>
        <p id="titulos">Ideas</p>
        <div id="pProyectos">
        {{#each profile.ideas}}
          {{#each idea_data this}}
              <div id="sectionProyectos">
              {{>idea}}
              </div>
          {{/each}}
        {{/each}}
      </div>
        <!--Corregir esto para ver si mostraremos comentarios
        <p id="titulos">Comentarios</p>
        <div id="pProyectos">
        {{#each profile.comments}}
          {{#each related_data this}}
              <div id="sectionProyectos">
              <span class="seeIdea" title="Ver Idea"><p>{{idea}} </p>
              <p>{{points}}</p>
              </span>
              </div>
          {{/each}}
        {{/each}}
        </div>
        -->
      </div>
    </section>
    {{/each}}
</template>
<template name="ideaData">
    {{#each idea_to_show}}
    <section class="container">
        {{>idea}}
        {{>video}}
        <!--{{>blocks}}-->
        <h2>Comentarios</h2>
        {{>comments}}
    </section>
    {{/each}}
</template>
<template name="video">
<!--Forma en que se da el link normalmente y cualquier mortal lo entiende 

http://vimeo.com/91333666
http://youtu.be/EipGZpAUBws
-->  
<iframe width="420" height="315" src="//www.youtube.com/embed/EipGZpAUBws" frameborder="0" allowfullscreen></iframe>
<!-- <iframe width="420" height="315" src="//player.vimeo.com/video/91333666" frameborder="0" allowfullscreen></iframe>
 -->
</template>
<template name="blocks">

</template>
<template name="theUser">
{{#each user}}
  <a href="{{pathFor 'profile'}}">
  {{profile.firstName}}
  </a>
{{/each}}
</template>
