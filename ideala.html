<head>
   <title>Kip</title>
   <!--Mobile first -->
   <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
   {{>navigation}}
   {{> main }}
</body>

 <!-- Barra de navegacion-->
<template name="navigation">
  <nav class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse"
            data-target=".navbar-ex1-collapse">
      <span class="sr-only">Desplegar navegación</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="{{pathFor 'welcome'}}">Kip</a>
    </div> 
    <div class="collapse navbar-collapse navbar-ex1-collapse">  
      <ul class="nav navbar-nav">
        {{#if currentUser}}
          <li><a href="{{pathFor 'ideas'}}">Ideas</a></li>
          <li><a  href="{{pathFor 'people'}}">Personas</a></li>
          <li>{{>theUser}}</li>
          <li><a href="#logout" class="tryLogout">Salir</a></li>
        {{/if}}
      </ul>
    </div> 
  </nav>
</template>

<template name="main">

  {{#if currentUser}}
    {{>newIdea}}
  {{/if}}
  {{#if showSimilarIdeas}}
      {{>similar_ideas}}
  {{/if}}
</template>

  <!-- Seccion:"Welcome"-->
<template name="welcome">
  {{#if currentUser}}
    {{>ideas}}
  {{else}}
        {{>welcomeMessage}}
  {{/if}}
</template>

<template name="welcomeMessage">
    <h1>Kip</h1>
    <p>Manteniendo las ideas en la realidad</p>
    <br>
    <p>Caracteristicas con imagenes y botones de link</p>
    <a href="{{pathFor 'loginForm'}}"><button type="button" class="btn btn-primary">Comenzar</button></a>
    {{>loginButtons}}
    <p>Porqué Kip con boton "tengo una idea"</p>
    <p>Prensa</p>
    
</template>

<template name="newIdea">
  <form method="post" action="index.html">
        <label>¿Cuál es tu idea?</label>
        <p><textarea type="text" id="pitch">{{ideaData.pitch}}</textarea></p>
        <label>Palabras clave de tu idea separadas por coma</label>
        <p><input type="text" name="typeOfIdea" id="tagsOfIdea" value={{ideaData.tagsOfIdea}}></p>
        <p><input type="submit"  class="searchIdea" value="Añadir Idea"></p>    
  </form>
</template>

<template name="similar_ideas">
  <h2>Ideas similares</h2>
  <p><input type="submit"  class="saveIdea" value="Mi idea es diferente"></p>
  {{#each matching_idea}}
      {{>idea}}
  {{else}}
  <h3>No se encontraron ideas similares</h3>
  {{/each}}
</template>

<template name="ideas">
  {{#each open_idea}}
      {{>idea}}
      {{>comments}}
  {{/each}}
</template>

<template name="idea">
    <a href="{{pathFor 'ideaData'}}">
      <p><span class="badge">{{points}}</span> {{pitch}}</p>
      <p>{{tagsOfIdea}}</p>
    </a>
      <p>{{>persons}}</p>
    <p><input type="button"  class="followIdea" value="Kip"></p>
    {{#if canEdit this.peopleInvolved.users currentUser._id}}
        <a href="{{pathFor 'editIdea'}}"><input type="submit"  class="eIdea" value="Editar"></a>
      {{/if}}
</template>

<template name="comments">
  {{#each commentToShow this}}
      <p><img src="/up.png" height="42" width="42" class="increase"><span class="badge">{{points}}</span>  {{text}}</p>
  {{/each}}
  <p><input type="button"  class="showComments" value="Ver todos"></p>
  {{>newComment}}
</template>

<template name="newComment">
<p><input type="text" name="textOfComment" id="textOfComment" placeholder="Nuevo comentario..."></p>
  <p><input type="submit"  class="saveComment" value="Comentar"></p>
</template>

<template name="people">
  {{#each user}}
    <a href="{{pathFor 'profile'}}">
      <span class="badge">{{profile.points}}</span>  {{profile.firstName}} {{profile.lastName}}
      {{#each profile.roles}}
        {{this}}
      {{/each}}
    </a>
  {{/each}}
</template>

<template name="editIdea">
  {{#each ideaData}}
  <h1>Edit</h1>
  <input type="text" id="description" name="description" value="{{pitch}}"><br>
  <!--Mostrar bloques actuales -->
  {{#each blocks}}
  <blockquote>Bloque</blockquote>
    {{>displayBlock}}
  {{/each}}
  {{#if newText}}
  <input type="button" id="isHeader" name="isHeader" value="Título">
  <input type="button" id="isSubheader" name="isSubheader" value="Título">
  <input type="button" id="isNormal" name="is Normal" value="Normal">
  <input type="button" id="italic" name="italic" value="Cursiva">
  <input type="button" id="blond" name="blond" value="Negrita">
  <input type="text" id="text" name="text" placeholder="Escribe aqui"><br>
  {{/if}}
  {{#if newImage}}
  <label for="image"> Insertar imagen <input type="file" id="image" name="image" class="image"> </label><br>
  {{/if}}
  <input type="button" id="newText" name="newText" class="newText" value="Añadir Texto">
  <input type="button" id="newImage" name="newImage" class="newImage" value="Añadir Imagen"><br>
  <a href="{{pathFor 'ideaData'}}">
   <input type="submit" id="done" name="done" class="done" value="Hecho">
  </a>
  <!--new Link también será interesante -->
  <!--posicion guardada en columnas de bootstrap o en tabla -->
  <!--input type="hidden" role="uploadcare-uploader" -->
  {{/each}}
</template>
<template name="displayBlock">
{{#if blockIsText this}}
  {{this}}
{{else}}
  {{#each fileFounded this}}
    <p>Archivo</p>
    {{name}}
    <img src="{{url}}">
  {{/each}}
{{/if}}
</template>

<template name="loginForm">
<!--login modal-->
<div id="loginModal" class="modal show" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
  <div class="modal-content">
      <div class="modal-header">
          <a href="{{pathFor 'welcome'}}"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button></a>
          <h1 class="text-center">Iniciar sesión</h1>
      </div>
      <div class="modal-body">
          <form class="form col-md-12 center-block">
            <div class="form-group">
              <input class="form-control input-lg" id="username" placeholder="Usuario" type="text">
            </div>
            <div class="form-group">
              <input class="form-control input-lg" id="password" placeholder="Contraseña" type="password">
            </div>
            <div class="form-group">
              <span class="pull-right"><a href="{{pathFor 'newUserForm'}}">Crear una cuenta</a></span><span><a href="#">Ayuda?</a></span>
              <button class="btn btn-primary btn-lg btn-block tryLogin">Entrar</button>
              <h3 class="text-center">O</h3>
              <img class="tryFacebookLogin" src="loginfacebook.png">
            </div>
          </form>
      </div>
      <div class="modal-footer">
          <div class="col-md-12">
          <a href="{{pathFor 'welcome'}}"><button class="btn" data-dismiss="modal" aria-hidden="true">Cancelar</button></a>
      </div>  
      </div>
  </div>
  </div>
</div>
</template>

<!-- Seccion:"newUserForm"-->
<template name="newUserForm">
<h1>Nuevo usuario</h1>
<form name="newUserForm">
  <p><input type="text" class="form-control" id="firstName" placeholder="Nombre"></p>
  <p><input type="text" class="form-control" id="lastName" placeholder="Apellido"></p>
  <p><input type="text" class="form-control" id="username" placeholder="Usuario"></p>
  <p><input type="text" class="form-control" id="email" placeholder="Correo Electrónico"></p>
  <p><input type="password" class="form-control" id="password" placeholder="Contraseña"></p>
  <p><label>¿Qué roles te gusta realizar en un proyecto?</label><br>
  <input type="checkbox" name="role" value="administración">Administrarlo<br>
  <input type="checkbox" name="role" value="desarrollo">Desarrollarlo (Parte técnica)<br>
  <input type="checkbox" name="role" value="diseño">Diseñarlo<br>
  <input type="checkbox" name="role" value="ventas">Venderlo<br>
  <input type="checkbox" name="role" value="marketing">Difundirlo/promocionarlo<br>
  <input type="checkbox" name="role" value="inversionista">Financearlo<br>
  </p>
  <input type="checkbox" name="role" value="mentoría">Mentoría<br>
  <p><input id="submitBoton" class="createUser" type="submit" name="commit" value="Registrarse"></p>
  </form>
</template>

<template name="persons">
    {{#each peopleInvolved.users}}
      {{#each user this}}
        <a href="{{pathFor 'profile'}}">
        <p>{{profile.firstName}} {{profile.lastName}} </p>
        </a>
      {{/each}}
    {{/each}}
</template>

<template name="profile">
    {{#each user}}
      <h1>{{profile.firstName}} {{profile.lastName}} <span class="badge">{{profile.points}}</span> </h1>
      <p id="titulos">Ideas</p>
      {{#each profile.ideas}}
        {{#each idea_data this}}
            {{>idea}}
          {{/each}}
        {{/each}}
        <!--Corregir esto para ver si mostraremos comentarios
        <p id="titulos">Comentarios</p>
        <div id="pProyectos">
        {{#each profile.comments}}
          {{#each related_data this}}
              <div id="sectionProyectos">
              <span class="seeIdea" title="Ver Idea"><p>{{idea}} </p>
              <p>{{points}}</p>
              </span>
              </div>
          {{/each}}
        {{/each}}
        </div>
        -->
    {{/each}}
</template>
<template name="ideaData">
    {{#each idea_to_show}}
        {{>idea}}
        {{>video}}
        <!--{{>blocks}}-->
        <h2>Comentarios</h2>
        {{>comments}}
    {{/each}}
</template>
<template name="video">
<!--Forma en que se da el link normalmente y cualquier mortal lo entiende 

http://vimeo.com/91333666
http://youtu.be/EipGZpAUBws
-->  
<iframe width="420" height="315" src="//www.youtube.com/embed/EipGZpAUBws" frameborder="0" allowfullscreen></iframe>
<!-- <iframe width="420" height="315" src="//player.vimeo.com/video/91333666" frameborder="0" allowfullscreen></iframe>
 -->
</template>
<template name="blocks">

</template>
<template name="theUser">
{{#each user}}
  <a href="{{pathFor 'profile'}}">
  {{profile.firstName}}
  </a>
{{/each}}
</template>
